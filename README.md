# Godot game engine Android plugin for Bazaar authentication and in-app storage

<br>

### [View this page in English](README_EN.md)


<br>

<div dir="rtl">

## افزونه موتور بازی سازی گودو برای احراز هویت و حافظه درون برنامه‌ای بازار


 
این پلاگین امکان استفاده از احراز هویت و حافظه درون برنامه‌ای   [کافه بازار](https://cafebazaar.ir) را در موتور بازی سازی [گودو](https://godotengine.org) فراهم میکند.
برای این کار کافی است فایل zip موجود در قسمت [*Release*](https://github.com/ygngy/godot-bazaar-auth/releases) را دانلود کرده و محتوای آن را در پوشه **android/plugins** کپی کنید. نحوه استفاده از پلاگین اندروید در گودو را می توانید از [اینجا](https://docs.godotengine.org/en/stable/tutorials/plugins/android/android_plugin.html#loading-and-using-an-android-plugin) بخوانید.

**توجه: هنگام اکسپورت کردن فایل اندروید باید به اینترنت متصل باشید.**
<br>

## نحوه استفاده از پلاگین‌ها در اسکریپت گودو 

در اینجا یک نمونه از اسکریپت گودو برای استفاده از این افزونه آورده شده است. شما می توانید آن را مطابق با نیاز خود به صورت دلخواه تغییر دهید.

</div>

```python

var bazaar_auth = "BazaarAuth" # <<--- نام پلاگین
var auth = null

func _ready():
	if Engine.has_singleton(bazaar_auth):
		auth = Engine.get_singleton(bazaar_auth)
		auth.connect("get_storage", self, "_on_get_storage") # <--- رویداد دریافت ذخیره بازی از بازار
		auth.connect("set_storage", self, "_on_set_storage") # <--- رویداد تایید ذخیره شدن در بازار
		auth.connect("user_id", self, "_on_got_user_id") # <--- رویداد دریافت آیدی کاربر از بازار 
		
		auth.getUserId() # <--- درخواست آیدی کاربر از بازار
	else:
		print("========= Error! Auth plugin NOT FOUND ===========")


# تابع دریافت ذخیره بازی از بازار
func _on_get_storage(data: String):
	print("get stored data: " + data)
	

# تابع تایید ذخیره شدن بازی در بازار
func _on_set_storage(data: String):
	print("set stored data: " + data)
	

# تابع دریافت آیدی کاربر از بازار
func _on_got_user_id(id: String):
	print("Bazaar Auth user id: " + id)
	# پس از احراز هویت، می توانید داده های کاربر را از بازار دریافت کنید یا در بازار ذخیره کنید
	auth.saveData("sample user score is 123") # روش ذخیره یک نمونه داده در بازار
	auth.getSavedData() # روش درخواست ذخیره بازی از بازار







#========================== رویدادهای این پلاگین ========================================
# این پلاگین فقط دارای سه رویداد زیر است
# get_storage, set_storage, user_id
# است String داده همراه هر سه این رویدادها از نوع رشته متنی یعنی
# آیدی کاربر است user_id داده همراه
# اطلاعات ذخیره شده بازی در بازار است get_storage, set_storage و داده همراه رویدادهای 


#========================== لیست توابع اصلی پلاگین ======================================
# با این سه تابع اصلی از تمامی عملکردهای این پلاگین می‌توانید استفاده کنید

#>>>>   getUserId(): boolean   <<<< درخواست آیدی کاربر 
# این تابع برای درخواست آیدی کاربر از بازار استفاده می‌شود
# است و دیالوگ نصب بازار به کاربر نمایش داده می‌شود false درصورتی که بازار نصب نباشد و یا به روز نباشد خروجی
# ارسال می‌شود user_id است و پس از اتمام فرایند، آیدی از طریق رویداد true ولی درصورتی که فرایند دریافت آیدی شروع شود خروجی تابع

#>>>>   saveData(String): boolean  <<<< ذخیره بازی در بازار
# این تابع برای ذخیره اطلاعات بازی در بازار استفاده می‌شود
# است و دیالوگ نصب بازار به کاربر نمایش داده می‌شود false درصورتی که بازار نصب نباشد و یا به روز نباشد خروجی
# ارسال می‌شود set_storage است و پس از ذخیره شدن، اطلاعات ذخیره شده از طریق رویداد true درغیر اینصورت خروجی تابع

#>>>>   getSavedData(): boolean    <<<< درخواست داده‌های ذخیره شده بازی
# این تابع برای دریافت اطلاعات بازی از بازار استفاده می‌شود
# است و دیالوگ نصب بازار به کاربر نمایش داده می‌شود false درصورتی که بازار نصب نباشد و یا به روز نباشد خروجی
# ارسال می‌شود get_storage است و اطلاعات بازی از طریق رویداد true درغیر اینصورت خروجی تابع



#============================ لیست توابع کمکی پلاگین ==========================================
# وقتی از توابع فوق استفاده می‌شود توابع زیر به صورت خودکار استفاده می‌شوند 
# پس نیازی نیست توابع زیر را خودتان فراخوانی کنید ولی درصورت نیاز می‌توانید از آنها استفاده کنید

#   hasBazaar(): boolean    <========== بررسی نصب بودن بازار
# به معنی نصب بودن بازار است true خروجی
# است و دیالوگ نصب بازار به کاربر نمایش داده می‌شود false ولی اگر بازار نصب نباشد خروجی

#   needAuthUpdate(): boolean     <====== بررسی لزوم به روز رسانی بازار برای احراز هویت
# به معنی به روز بودن بازار برای عملکرد احراز هویت است false خروجی
# است و دیالوگ به روز رسانی بازار به کاربر نمایش داده می‌شود true ولی اگر بازار به روز نباشد خروجی

#   needStorageUpdate(): boolean  <====== بررسی لزوم به روز رسانی بازار برای ذخیره بازی
# به معنی به روز بودن بازار برای عملکرد ذخیره سازی است false خروجی
# است و دیالوگ به روز رسانی بازار به کاربر نمایش داده می‌شود true ولی اگر بازار به روز نباشد خروجی

#   installBazaar()   <======== درخواست نصب بازار
#   updateBazaar()    <======== درخواست آپدیت بازار


```


---------------------------------------------------------------------------


**"Mohamadreza Amani"**  

My LinkedIn Profile: [https://www.linkedin.com/in/ygngy](https://www.linkedin.com/in/ygngy)

My Github Profile: [https://github.com/ygngy](https://github.com/ygngy)  

Email:  [amany1388@gmail.com](mailto:amany1388@gmail.com)